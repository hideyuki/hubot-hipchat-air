# Description:
#   Air controller
#
# Commands:
#   hubot air (on|off) - switch air

module.exports = (robot) ->
  IRKIT_MESSAGE_API = "http://api.getirkit.com/1/messages"
  CLIENT_KEY = "YOUR_CLIENT_KEY"
  DEVICE_ID = "YOUR_DVICE_ID"
  MESSAGE_ON = '{"format":"raw","freq":38,"data":[6648,3341,843,2537,843,2537,843,843,843,843,843,843,843,2537,843,843,843,843,843,2537,843,2537,843,843,843,2537,843,843,843,843,843,2537,843,2537,843,843,843,2537,843,2537,843,843,843,843,843,2537,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,2537,843,2537,843,843,843,2537,843,2537,843,26325,6648,3341,843,2537,843,2537,843,843,843,843,843,843,843,2537,843,843,843,843,843,2537,843,2537,843,843,843,2537,843,843,843,843,843,2537,843,2537,843,843,843,2537,843,2537,843,843,843,843,843,2537,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2537,843,843,843,2537,843,2537,843,843,843,2537,843,2537,843]}' # your ON message
  MESSAGE_OFF = '{"format":"raw","freq":38,"data":[6881,3228,904,2451,904,2451,904,787,904,787,904,787,904,2451,904,787,904,787,904,2451,904,2451,904,787,904,2451,904,787,904,787,904,2451,904,2451,904,787,904,2451,904,2451,904,787,904,787,904,2451,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,2451,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,787,904,2451,904,2451,904,2451,904,787,904,2451,904,26325,6881,3228,904,2451,904,2451,904,787,904,787,904,787,904,2451,904,787,904,787,904,2451,904,2451,904,787,904,2451,904,787,904,787,904,2451,904,2451,904,787,904,2451,904,2451,904,787,904,787,904,2451,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,2451,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,787,904,2451,935,735,935,2451,935,2451,935,2451,935,735,935,2451,935]}' # your OFF message

  postIRKit = (msg, json, output) ->
    robot
      .http IRKIT_MESSAGE_API
      .query
        clientkey: CLIENT_KEY
        deviceid: DEVICE_ID
        message: json
      .post (err, res, body) ->
        msg.send output

  robot.respond /air (on|off)/i, (msg) ->
    sw = msg.match[2]
    if sw is "on"
      postIRKit msg, MESSAGE_ON, "ON"
    else
      postIRKit msg, MESSAGE_OFF, "OFF"

